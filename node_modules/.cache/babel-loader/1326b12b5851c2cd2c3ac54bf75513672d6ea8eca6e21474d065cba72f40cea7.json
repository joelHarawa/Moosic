{"ast":null,"code":"import _slicedToArray from\"C:/Users/Joel/WebstormProjects/Moosic/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"C:/Users/Joel/WebstormProjects/Moosic/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7;import React,{useEffect,useState}from\"react\";import Navbar from\"../components/Navbar\";import styled,{keyframes}from\"styled-components\";import SearchMood from\"../components/SearchMood\";import{AuthContext}from\"../myContext/myAuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AnimationName=keyframes(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  0% { background-position: 0% 50%; }\\n  50% { background-position: 100% 50%; }\\n  100% { background-position: 0% 50%; }\\n\"])));var Container=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  height: 92vh;\\n  width: 100%;\\n  background: linear-gradient(234deg, #a239ca, #0e0b16);\\n  background-size: 400% 400%;\\n  animation: \",\" 15s ease infinite;\\n\"])),AnimationName);var Center=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  padding-top: 10%;\\n  flex: 1;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  flex-direction: column;\\n\"])));var ContentBox=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n    background-color: #0E0B16;\\n    padding: 1%;\\n    width:60%;\\n\"])));var Title=styled.h1(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n    color: #4717F6;\\n\"])));var Playlist=styled.ul(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n    list-style: none;\\n    padding-left: 0;\\n\"])));var Song=styled.li(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n    color: #A239CA;\\n    text-decoration: none;\\n    font-size: 18px;\\n    padding: 2px;\\n    margin: 0;\\n    &:hover {\\n      color: white;\\n      cursor: pointer;\\n      background-color: #4717F6;\\n    }\\n\"])));var ViewPlaylist=function ViewPlaylist(){var playlistName=\"My Mood Playlist\";var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),userID=_useState2[0],setUserID=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),token=_useState4[0],setToken=_useState4[1];useEffect(function(){if(localStorage.getItem(\"token\")){setToken(localStorage.getItem(\"token\"));}});useEffect(function(){if(token){fetch(\"https://api.spotify.com/v1/me\",{headers:{Authorization:\"Bearer \".concat(token)}}).then(function(response){return response.json();}).then(function(data){setUserID(data.id);}).catch(function(error){console.error(\"Error fetching user data:\",error);});}},[token]);var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),playlistID=_useState6[0],setPlaylistID=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),playlists=_useState8[0],setPlayists=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),playlist=_useState10[0],setPlayist=_useState10[1];useEffect(function(){fetch(\"https://api.spotify.com/v1/users/\".concat(userID,\"/playlists\"),{method:'GET',headers:{Authorization:\"Bearer \".concat(token)}}).then(function(response){return response.json();}).then(function(data){setPlayists(data.items);// Find the playlist by name and set the playlistID\nif(Array.isArray(data.items)){var selectedPlaylist=data.items.find(function(item){return item.name===playlistName;});if(selectedPlaylist){setPlaylistID(selectedPlaylist.id);}}}).catch(function(error){console.error(\"Error fetching playlists:\",error);});},[userID,token,playlistName]);useEffect(function(){// Fetch tracks when playlistID is available\nif(playlistID){fetch(\"https://api.spotify.com/v1/playlists/\".concat(playlistID,\"/tracks\"),{method:'GET',headers:{Authorization:\"Bearer \".concat(token)}}).then(function(response){return response.json();}).then(function(data){setPlayist(data.items);}).catch(function(error){console.error(\"Error fetching playlist tracks:\",error);});}},[playlistID,token]);console.log(playlist);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Center,{children:/*#__PURE__*/_jsxs(ContentBox,{children:[/*#__PURE__*/_jsx(Title,{children:playlistName}),playlist.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):/*#__PURE__*/_jsx(Playlist,{children:playlist.map(function(song){return/*#__PURE__*/_jsxs(Song,{children:[song.track.artists.map(function(artist){return artist.name;}).join(\", \"),\" - \",song.track.name]});})})]})})})]});};export default ViewPlaylist;","map":{"version":3,"names":["React","useEffect","useState","Navbar","styled","keyframes","SearchMood","AuthContext","jsx","_jsx","jsxs","_jsxs","AnimationName","_templateObject","_taggedTemplateLiteral","Container","div","_templateObject2","Center","_templateObject3","ContentBox","_templateObject4","Title","h1","_templateObject5","Playlist","ul","_templateObject6","Song","li","_templateObject7","ViewPlaylist","playlistName","_useState","_useState2","_slicedToArray","userID","setUserID","_useState3","_useState4","token","setToken","localStorage","getItem","fetch","headers","Authorization","concat","then","response","json","data","id","catch","error","console","_useState5","_useState6","playlistID","setPlaylistID","_useState7","_useState8","playlists","setPlayists","_useState9","_useState10","playlist","setPlayist","method","items","Array","isArray","selectedPlaylist","find","item","name","log","children","length","map","song","track","artists","artist","join"],"sources":["C:/Users/Joel/WebstormProjects/Moosic/client/src/pages/ViewPlaylist.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport Navbar from \"../components/Navbar\";\r\nimport styled, {keyframes} from \"styled-components\";\r\nimport SearchMood from \"../components/SearchMood\";\r\n\r\nimport {AuthContext} from \"../myContext/myAuthContext\";\r\n\r\nconst AnimationName = keyframes`\r\n  0% { background-position: 0% 50%; }\r\n  50% { background-position: 100% 50%; }\r\n  100% { background-position: 0% 50%; }\r\n`;\r\n\r\nconst Container = styled.div`\r\n  height: 92vh;\r\n  width: 100%;\r\n  background: linear-gradient(234deg, #a239ca, #0e0b16);\r\n  background-size: 400% 400%;\r\n  animation: ${AnimationName} 15s ease infinite;\r\n`;\r\n\r\n\r\n\r\nconst Center = styled.div`\r\n  padding-top: 10%;\r\n  flex: 1;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n`;\r\nconst ContentBox = styled.div`\r\n    background-color: #0E0B16;\r\n    padding: 1%;\r\n    width:60%;\r\n`;\r\n\r\nconst Title = styled.h1`\r\n    color: #4717F6;\r\n`;\r\n\r\nconst Playlist = styled.ul`\r\n    list-style: none;\r\n    padding-left: 0;\r\n`;\r\nconst Song = styled.li`\r\n    color: #A239CA;\r\n    text-decoration: none;\r\n    font-size: 18px;\r\n    padding: 2px;\r\n    margin: 0;\r\n    &:hover {\r\n      color: white;\r\n      cursor: pointer;\r\n      background-color: #4717F6;\r\n    }\r\n`;\r\nconst ViewPlaylist = () => {\r\n    const playlistName = \"My Mood Playlist\";\r\n    const [userID, setUserID] = useState(\"\");\r\n\r\n    const [token, setToken] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        if (localStorage.getItem(\"token\")) {\r\n            setToken(localStorage.getItem(\"token\"))\r\n        }\r\n    })\r\n\r\n    useEffect(() => {\r\n        if (token) {\r\n            fetch(\"https://api.spotify.com/v1/me\", {\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                },\r\n            })\r\n                .then((response) => response.json())\r\n                .then((data) => {\r\n                    setUserID(data.id);\r\n                })\r\n                .catch((error) => {\r\n                    console.error(\"Error fetching user data:\", error);\r\n                })\r\n        }\r\n    }, [token]);\r\n\r\n\r\n    const [playlistID, setPlaylistID] = useState(\"\");\r\n    const [playlists, setPlayists] = useState([]);\r\n    const [playlist, setPlayist] = useState([]);\r\n\r\n    useEffect(() => {\r\n        fetch(`https://api.spotify.com/v1/users/${userID}/playlists`, {\r\n            method: 'GET',\r\n            headers: {\r\n                Authorization: `Bearer ${token}`\r\n            },\r\n        })\r\n            .then(response => response.json())\r\n            .then((data) => {\r\n                setPlayists(data.items);\r\n\r\n                // Find the playlist by name and set the playlistID\r\n                if (Array.isArray(data.items)) {\r\n                    const selectedPlaylist = data.items.find(item => item.name === playlistName);\r\n                    if (selectedPlaylist) {\r\n                        setPlaylistID(selectedPlaylist.id);\r\n                    }\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                console.error(\"Error fetching playlists:\", error);\r\n            });\r\n    }, [userID, token, playlistName]);\r\n\r\n    useEffect(() => {\r\n        // Fetch tracks when playlistID is available\r\n        if (playlistID) {\r\n            fetch(`https://api.spotify.com/v1/playlists/${playlistID}/tracks`, {\r\n                method: 'GET',\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`\r\n                }\r\n            })\r\n                .then(response => response.json())\r\n                .then((data) => {\r\n                    setPlayist(data.items);\r\n                })\r\n                .catch((error) => {\r\n                    console.error(\"Error fetching playlist tracks:\", error);\r\n                });\r\n        }\r\n    }, [playlistID, token]);\r\n\r\n    console.log(playlist)\r\n\r\n    return(\r\n        <div>\r\n            <Navbar/>\r\n            <Container>\r\n                <Center>\r\n                    <ContentBox>\r\n                        <Title>{playlistName}</Title>\r\n                        {playlist.length === 0 ? (\r\n                            <p>Loading...</p>\r\n                        ) : (\r\n                            <Playlist>\r\n                                {playlist.map((song) => (\r\n                                    <Song>{song.track.artists.map((artist) => artist.name).join(\", \")} - {song.track.name}</Song>\r\n                                ))}\r\n                            </Playlist>\r\n                        )}\r\n                    </ContentBox>\r\n                </Center>\r\n            </Container>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default ViewPlaylist;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}