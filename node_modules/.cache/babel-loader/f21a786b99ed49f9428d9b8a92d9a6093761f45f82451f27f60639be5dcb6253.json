{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Joel\\\\WebstormProjects\\\\Moosic\\\\client\\\\src\\\\myContext\\\\myAuthContext.js\",\n  _s2 = $RefreshSig$();\nimport React, { createContext, useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext();\nexport const AuthProvider = _ref => {\n  _s2();\n  var _s = $RefreshSig$();\n  let {\n    children\n  } = _ref;\n  const CLIENT_ID = \"69df94900568478790af02c965324d0f\";\n  const REDIRECT_URI = \"http://localhost:3000/\";\n  const AUTH_ENDPOINT = \"https://accounts.spotify.com/authorize\";\n  const RESPONSE_TYPE = \"token\";\n  const [token, setToken] = useState(\"\");\n  useEffect(() => {\n    const hash = window.location.hash;\n    let token = window.localStorage.getItem(\"token\");\n\n    //if we don't have a token and the hash is set\n    if (!token && hash) {\n      token = hash.substring(1).split(\"&\").find(element => element.startsWith(\"access_token\")).split(\"=\")[1];\n\n      //store token in local storage\n      window.location.hash = \"\";\n      window.localStorage.setItem(\"token\", token);\n      setToken(token);\n    }\n  }, []);\n  const login = () => {\n    _s();\n    const history = useHistory();\n    const authUrl = `${AUTH_ENDPOINT}?client_id=${CLIENT_ID}&redirect_uri=${REDIRECT_URI}&response_type=${RESPONSE_TYPE}`;\n    history.push(authUrl);\n  };\n  _s(login, \"9cZfZ04734qoCGIctmKX7+sX6eU=\", false, function () {\n    return [useHistory];\n  });\n  const logout = () => {\n    setToken(\"\");\n    window.localStorage.removeItem(\"token\");\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: [token, login, logout],\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 9\n  }, this);\n};\n_s2(AuthProvider, \"uRWVyxPfKU3Lv5uAeNftFtP/ZvU=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useEffect","useState","useHistory","jsxDEV","_jsxDEV","AuthContext","AuthProvider","_ref","_s2","_s","$RefreshSig$","children","CLIENT_ID","REDIRECT_URI","AUTH_ENDPOINT","RESPONSE_TYPE","token","setToken","hash","window","location","localStorage","getItem","substring","split","find","element","startsWith","setItem","login","history","authUrl","push","logout","removeItem","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Joel/WebstormProjects/Moosic/client/src/myContext/myAuthContext.js"],"sourcesContent":["import React, {createContext, useEffect, useState} from \"react\";\r\nimport {useHistory} from \"react-router-dom\";\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({children}) => {\r\n    const CLIENT_ID = \"69df94900568478790af02c965324d0f\";\r\n    const REDIRECT_URI = \"http://localhost:3000/\";\r\n    const AUTH_ENDPOINT = \"https://accounts.spotify.com/authorize\";\r\n    const RESPONSE_TYPE = \"token\";\r\n\r\n    const [token, setToken] = useState(\"\");\r\n    useEffect(() => {\r\n        const hash = window.location.hash;\r\n        let token = window.localStorage.getItem(\"token\");\r\n\r\n        //if we don't have a token and the hash is set\r\n        if (!token && hash) {\r\n            token = hash.substring(1).split(\"&\").find(element => element.startsWith(\"access_token\")).split(\"=\")[1];\r\n\r\n            //store token in local storage\r\n            window.location.hash = \"\";\r\n            window.localStorage.setItem(\"token\", token);\r\n            setToken(token);\r\n        }\r\n\r\n    }, []);\r\n\r\n    const login = () => {\r\n        const history = useHistory();\r\n        const authUrl = `${AUTH_ENDPOINT}?client_id=${CLIENT_ID}&redirect_uri=${REDIRECT_URI}&response_type=${RESPONSE_TYPE}`;\r\n\r\n        history.push(authUrl);\r\n    }\r\n\r\n    const logout = () => {\r\n        setToken(\"\");\r\n        window.localStorage.removeItem(\"token\");\r\n    }\r\n\r\n    return (\r\n        <AuthContext.Provider value={[token, login, logout]}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,aAAa,EAAEC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AAC/D,SAAQC,UAAU,QAAO,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5C,OAAO,MAAMC,WAAW,gBAAGN,aAAa,CAAC,CAAC;AAE1C,OAAO,MAAMO,YAAY,GAAGC,IAAA,IAAgB;EAAAC,GAAA;EAAA,IAAAC,EAAA,GAAAC,YAAA;EAAA,IAAf;IAACC;EAAQ,CAAC,GAAAJ,IAAA;EACnC,MAAMK,SAAS,GAAG,kCAAkC;EACpD,MAAMC,YAAY,GAAG,wBAAwB;EAC7C,MAAMC,aAAa,GAAG,wCAAwC;EAC9D,MAAMC,aAAa,GAAG,OAAO;EAE7B,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;EACtCD,SAAS,CAAC,MAAM;IACZ,MAAMkB,IAAI,GAAGC,MAAM,CAACC,QAAQ,CAACF,IAAI;IACjC,IAAIF,KAAK,GAAGG,MAAM,CAACE,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;;IAEhD;IACA,IAAI,CAACN,KAAK,IAAIE,IAAI,EAAE;MAChBF,KAAK,GAAGE,IAAI,CAACK,SAAS,CAAC,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,IAAI,CAACC,OAAO,IAAIA,OAAO,CAACC,UAAU,CAAC,cAAc,CAAC,CAAC,CAACH,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;;MAEtG;MACAL,MAAM,CAACC,QAAQ,CAACF,IAAI,GAAG,EAAE;MACzBC,MAAM,CAACE,YAAY,CAACO,OAAO,CAAC,OAAO,EAAEZ,KAAK,CAAC;MAC3CC,QAAQ,CAACD,KAAK,CAAC;IACnB;EAEJ,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMa,KAAK,GAAGA,CAAA,KAAM;IAAApB,EAAA;IAChB,MAAMqB,OAAO,GAAG5B,UAAU,CAAC,CAAC;IAC5B,MAAM6B,OAAO,GAAI,GAAEjB,aAAc,cAAaF,SAAU,iBAAgBC,YAAa,kBAAiBE,aAAc,EAAC;IAErHe,OAAO,CAACE,IAAI,CAACD,OAAO,CAAC;EACzB,CAAC;EAAAtB,EAAA,CALKoB,KAAK;IAAA,QACS3B,UAAU;EAAA;EAM9B,MAAM+B,MAAM,GAAGA,CAAA,KAAM;IACjBhB,QAAQ,CAAC,EAAE,CAAC;IACZE,MAAM,CAACE,YAAY,CAACa,UAAU,CAAC,OAAO,CAAC;EAC3C,CAAC;EAED,oBACI9B,OAAA,CAACC,WAAW,CAAC8B,QAAQ;IAACC,KAAK,EAAE,CAACpB,KAAK,EAAEa,KAAK,EAAEI,MAAM,CAAE;IAAAtB,QAAA,EAC/CA;EAAQ;IAAA0B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACS,CAAC;AAE/B,CAAC;AAAAhC,GAAA,CAxCYF,YAAY;AAAAmC,EAAA,GAAZnC,YAAY;AAAA,IAAAmC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}