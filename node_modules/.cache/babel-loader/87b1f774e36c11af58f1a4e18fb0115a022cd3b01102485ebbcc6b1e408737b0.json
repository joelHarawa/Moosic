{"ast":null,"code":"import _slicedToArray from\"C:/Users/Joel/WebstormProjects/Moosic/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{createContext,useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";export var AuthContext=/*#__PURE__*/createContext();export var AuthProvider=function AuthProvider(_ref){var children=_ref.children;var CLIENT_ID=\"69df94900568478790af02c965324d0f\";var REDIRECT_URI=\"https://app.moosic.xyz/\";var AUTH_ENDPOINT=\"https://accounts.spotify.com/authorize\";var RESPONSE_TYPE=\"token\";var SCOPES=[\"playlist-modify-public\",\"playlist-modify-private\",\"playlist-read-private\",\"playlist-read-collaborative\"];var SCOPES_URL=SCOPES.join(\"%20\");var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];useEffect(function(){var hash=window.location.hash;var token=window.localStorage.getItem(\"token\");//if we don't have a token and the hash is set\nif(!token&&hash){token=hash.substring(1).split(\"&\").find(function(element){return element.startsWith(\"access_token\");}).split(\"=\")[1];//store token in local storage\nwindow.location.hash=\"\";window.localStorage.setItem(\"token\",token);setToken(token);}},[]);var login=function login(){console.log(\"THIS IS RUNNING\");var authUrl=\"\".concat(AUTH_ENDPOINT,\"?client_id=\").concat(CLIENT_ID,\"&redirect_uri=\").concat(REDIRECT_URI,\"&scope=\").concat(SCOPES_URL,\"&response_type=\").concat(RESPONSE_TYPE);window.location.replace(authUrl);};var logout=function logout(){setToken(null);window.localStorage.removeItem(\"token\");};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{login:login,logout:logout},children:children});};","map":{"version":3,"names":["React","createContext","useEffect","useState","jsx","_jsx","AuthContext","AuthProvider","_ref","children","CLIENT_ID","REDIRECT_URI","AUTH_ENDPOINT","RESPONSE_TYPE","SCOPES","SCOPES_URL","join","_useState","_useState2","_slicedToArray","token","setToken","hash","window","location","localStorage","getItem","substring","split","find","element","startsWith","setItem","login","console","log","authUrl","concat","replace","logout","removeItem","Provider","value"],"sources":["C:/Users/Joel/WebstormProjects/Moosic/client/src/myContext/myAuthContext.js"],"sourcesContent":["import React, {createContext, useEffect, useState} from \"react\";\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({children}) => {\r\n    const CLIENT_ID = \"69df94900568478790af02c965324d0f\";\r\n    const REDIRECT_URI = \"https://app.moosic.xyz/\";\r\n    const AUTH_ENDPOINT = \"https://accounts.spotify.com/authorize\";\r\n    const RESPONSE_TYPE = \"token\";\r\n    const SCOPES = [\"playlist-modify-public\", \"playlist-modify-private\", \"playlist-read-private\", \"playlist-read-collaborative\"];\r\n    const SCOPES_URL = SCOPES.join(\"%20\");\r\n\r\n    const [token, setToken] = useState(\"\");\r\n    useEffect(() => {\r\n        const hash = window.location.hash;\r\n        let token = window.localStorage.getItem(\"token\");\r\n\r\n        //if we don't have a token and the hash is set\r\n        if (!token && hash) {\r\n            token = hash.substring(1).split(\"&\").find(element => element.startsWith(\"access_token\")).split(\"=\")[1];\r\n\r\n            //store token in local storage\r\n            window.location.hash = \"\";\r\n            window.localStorage.setItem(\"token\", token);\r\n            setToken(token);\r\n        }\r\n\r\n    }, []);\r\n\r\n    const login = () => {\r\n        console.log(\"THIS IS RUNNING\");\r\n        const authUrl = `${AUTH_ENDPOINT}?client_id=${CLIENT_ID}&redirect_uri=${REDIRECT_URI}&scope=${SCOPES_URL}&response_type=${RESPONSE_TYPE}`;\r\n        window.location.replace(authUrl);\r\n    }\r\n\r\n    const logout = () => {\r\n        setToken(null);\r\n        window.localStorage.removeItem(\"token\");\r\n    }\r\n\r\n    return (\r\n        <AuthContext.Provider value={{login, logout}}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n}"],"mappings":"kIAAA,MAAO,CAAAA,KAAK,EAAGC,aAAa,CAAEC,SAAS,CAAEC,QAAQ,KAAO,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEhE,MAAO,IAAM,CAAAC,WAAW,cAAGL,aAAa,CAAC,CAAC,CAE1C,MAAO,IAAM,CAAAM,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAAC,IAAA,CAAmB,IAAd,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CAClC,GAAM,CAAAC,SAAS,CAAG,kCAAkC,CACpD,GAAM,CAAAC,YAAY,CAAG,yBAAyB,CAC9C,GAAM,CAAAC,aAAa,CAAG,wCAAwC,CAC9D,GAAM,CAAAC,aAAa,CAAG,OAAO,CAC7B,GAAM,CAAAC,MAAM,CAAG,CAAC,wBAAwB,CAAE,yBAAyB,CAAE,uBAAuB,CAAE,6BAA6B,CAAC,CAC5H,GAAM,CAAAC,UAAU,CAAGD,MAAM,CAACE,IAAI,CAAC,KAAK,CAAC,CAErC,IAAAC,SAAA,CAA0Bd,QAAQ,CAAC,EAAE,CAAC,CAAAe,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA/BG,KAAK,CAAAF,UAAA,IAAEG,QAAQ,CAAAH,UAAA,IACtBhB,SAAS,CAAC,UAAM,CACZ,GAAM,CAAAoB,IAAI,CAAGC,MAAM,CAACC,QAAQ,CAACF,IAAI,CACjC,GAAI,CAAAF,KAAK,CAAGG,MAAM,CAACE,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAEhD;AACA,GAAI,CAACN,KAAK,EAAIE,IAAI,CAAE,CAChBF,KAAK,CAAGE,IAAI,CAACK,SAAS,CAAC,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,SAAAC,OAAO,QAAI,CAAAA,OAAO,CAACC,UAAU,CAAC,cAAc,CAAC,GAAC,CAACH,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAEtG;AACAL,MAAM,CAACC,QAAQ,CAACF,IAAI,CAAG,EAAE,CACzBC,MAAM,CAACE,YAAY,CAACO,OAAO,CAAC,OAAO,CAAEZ,KAAK,CAAC,CAC3CC,QAAQ,CAACD,KAAK,CAAC,CACnB,CAEJ,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAAa,KAAK,CAAG,QAAR,CAAAA,KAAKA,CAAA,CAAS,CAChBC,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC,CAC9B,GAAM,CAAAC,OAAO,IAAAC,MAAA,CAAMzB,aAAa,gBAAAyB,MAAA,CAAc3B,SAAS,mBAAA2B,MAAA,CAAiB1B,YAAY,YAAA0B,MAAA,CAAUtB,UAAU,oBAAAsB,MAAA,CAAkBxB,aAAa,CAAE,CACzIU,MAAM,CAACC,QAAQ,CAACc,OAAO,CAACF,OAAO,CAAC,CACpC,CAAC,CAED,GAAM,CAAAG,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAA,CAAS,CACjBlB,QAAQ,CAAC,IAAI,CAAC,CACdE,MAAM,CAACE,YAAY,CAACe,UAAU,CAAC,OAAO,CAAC,CAC3C,CAAC,CAED,mBACInC,IAAA,CAACC,WAAW,CAACmC,QAAQ,EAACC,KAAK,CAAE,CAACT,KAAK,CAALA,KAAK,CAAEM,MAAM,CAANA,MAAM,CAAE,CAAA9B,QAAA,CACxCA,QAAQ,CACS,CAAC,CAE/B,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}